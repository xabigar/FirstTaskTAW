<!DOCTYPE html>
<html lang="en">
<head>
    <title>Score</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../style/main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script src="../scripts/classes/Team.js"></script>
    <script>
        let xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                createTeams(this);
            }
        };
        xhttp.open("GET", "../resources/teams.xml", true);
        xhttp.send();

        function createTeams(xml) {
            let xmlDoc = xml.responseXML;
            let teams = xmlDoc.getElementsByTagName('team');
            let teamsObjects = []
            for (let i=0;i<teams.length;i++) {
                let team = teams[i]
                let name = team.children[0].innerHTML
                let win = team.children[1].innerHTML
                let draw = team.children[2].innerHTML
                let lose = team.children[3].innerHTML
                let scoredGoals = team.children[4].innerHTML
                let receivedGoals = team.children[5].innerHTML
                let img = team.children[6].innerHTML
                let teamObject = new Team(name, win, draw, lose, scoredGoals, receivedGoals, img)
                teamsObjects.push(teamObject)
            }
            let sortedTeams = teamsObjects.sort((team2, team1) => (
                team1.points - team2.points
            ))
            completeTable(sortedTeams)
        }

        function completeTable(sortedTeams) {
            let classification = document.getElementById('classificationBody')
            for (let i=0;i<sortedTeams.length;i++) {
                let team = sortedTeams[i]
                let fila = document.createElement('tr')
                fila.className = "rowBorder"
                classification.appendChild(fila)
                let pos = document.createElement('th')
                pos.textContent = i+1
                if (i < 4) {
                    pos.className = "championsZone"
                } else if (i>3 && i<6) {
                    pos.className = "europaZone"
                } else if (i>16) {
                    pos.className = "secondLeagueZone"
                }
                pos.className += " tableNumberElement positionElement"
                let name = document.createElement('th')
                // name.textContent = team.name
                let img = document.createElement('img')
                img.src = '../img/teams/' + team.imgFile
                img.className = 'teamLogo'
                name.appendChild(img)
                let span = document.createElement('span')
                span.textContent = team.name
                name.appendChild(span)
                let pj = document.createElement('th')
                pj.className = 'tableNumberElement'
                pj.textContent = team.playedGames
                let pg = document.createElement('th')
                pg.className = 'tableNumberElement'
                pg.textContent = team.win
                let pe = document.createElement('th')
                pe.className = 'tableNumberElement'
                pe.textContent = team.draw
                let pp = document.createElement('th')
                pp.className = 'tableNumberElement'
                pp.textContent = team.lose
                let gf = document.createElement('th')
                gf.className = 'tableNumberElement'
                gf.textContent = team.scoredGoals
                let gc = document.createElement('th')
                gc.className = 'tableNumberElement'
                gc.textContent = team.receivedGoals
                let ga = document.createElement('th')
                ga.className = 'tableNumberElement'
                ga.textContent = team.goalDifference
                let pts = document.createElement('th')
                pts.className = 'tableNumberElement'
                pts.textContent = team.points
                fila.appendChild(pos)
                fila.appendChild(name)
                fila.appendChild(pj)
                fila.appendChild(pg)
                fila.appendChild(pe)
                fila.appendChild(pp)
                fila.appendChild(gf)
                fila.appendChild(gc)
                fila.appendChild(ga)
                fila.appendChild(pts)
            }
        }
    </script>
</head>
<body>

<div class="header">
    <div class="title">
        <img class="imgIzq" src="../img/ball.png" alt="Italian Trulli">
        <div class="pageTitle">
            <h1>Score.com</h1>
            <p>Your football live results!</p>
        </div>
        <img class="imgDch" src="../img/ball.png" alt="Italian Trulli">
    </div>
</div>

<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
    <a class="navbar-brand" href="../index.html">Home</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="collapsibleNavbar">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="#">Results</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Table</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Fixture</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Ranking</a>
            </li>
        </ul>
    </div>
</nav>

<div class="classification">
    <table id="classificationTable">
        <thead>
            <tr id="tableHead">
                <th colspan="2">Table</th>
                <th class="tableNumberElement">MP</abbr></a></th>
                <th class="tableNumberElement">W</abbr></th>
                <th class="tableNumberElement">D</th>
                <th class="tableNumberElement">L</th>
                <th class="tableNumberElement">G.F.</th>
                <th class="tableNumberElement">G.C.</th>
                <th class="tableNumberElement">G.D.</th>
                <th class="tableNumberElement">P</th>
        </tr>
        </thead>
        <tbody id="classificationBody">
        <!--
        <tr>
            <td class="posicion ascenso">2</td>
            <td class="equipo">R. Madrid</td>
            <td class="pj">27</td>
            <td class="pg">16</td>
            <td class="pe">8</td>
            <td class="pp">3</td>
            <td class="gf">49</td>
            <td class="gc">19</td>
            <td class="pts seleccionado">56</td>
        </tr>
        <tr>
            <td class="posicion ascenso">3</td>
            <td class="equipo">Sevilla</td>
            <td class="pj">27</td>
            <td class="pg">13</td>
            <td class="pe">8</td>
            <td class="pp">6</td>
            <td class="gf">39</td>
            <td class="gc">29</td>
            <td class="pts seleccionado">47</td>
        </tr>
        <tr>
            <td class="posicion ascenso">4</td>
            <td class="equipo">R. Sociedad</td>
            <td class="pj">27</td>
            <td class="pg">14</td>
            <td class="pe">4</td>
            <td class="pp">9</td>
            <td class="gf">45</td>
            <td class="gc">33</td>
            <td class="pts seleccionado">46</td>
        </tr>
        <tr>
            <td class="posicion uefa">5</td>
            <td class="equipo">Getafe</td>
            <td class="pj">27</td>
            <td class="pg">13</td>
            <td class="pe">7</td>
            <td class="pp">7</td>
            <td class="gf">37</td>
            <td class="gc">25</td>
            <td class="pts seleccionado">46</td>
        </tr>
        <tr>
            <td class="posicion uefa">6</td>
            <td class="equipo">Atl√©tico</td>
            <td class="pj">27</td>
            <td class="pg">11</td>
            <td class="pe">12</td>
            <td class="pp">4</td>
            <td class="gf">31</td>
            <td class="gc">21</td>
            <td class="pts seleccionado">45</td>
        </tr>
        <tr>
            <td class="posicion">7</td>
            <td class="equipo">Valencia</td>
            <td class="pj">27</td>
            <td class="pg">11</td>
            <td class="pe">9</td>
            <td class="pp">7</td>
            <td class="gf">38</td>
            <td class="gc">39</td>
            <td class="pts seleccionado">42</td>
        </tr>
        <tr>
            <td class="posicion">8</td>
            <td class="equipo">Villarreal</td>
            <td class="pj">27</td>
            <td class="pg">11</td>
            <td class="pe">5</td>
            <td class="pp">11</td>
            <td class="gf">44</td>
            <td class="gc">38</td>
            <td class="pts seleccionado">38</td>
        </tr>
        <tr>
            <td class="posicion">9</td>
            <td class="equipo">Granada</td>
            <td class="pj">27</td>
            <td class="pg">11</td>
            <td class="pe">5</td>
            <td class="pp">11</td>
            <td class="gf">33</td>
            <td class="gc">32</td>
            <td class="pts seleccionado">38</td>
        </tr>
        <tr>
            <td class="posicion">10</td>
            <td class="equipo">Athletic</td>
            <td class="pj">27</td>
            <td class="pg">9</td>
            <td class="pe">10</td>
            <td class="pp">8</td>
            <td class="gf">29</td>
            <td class="gc">23</td>
            <td class="pts seleccionado">37</td>
        </tr>
        <tr>
            <td class="posicion">11</td>
            <td class="equipo">Osasuna</td>
            <td class="pj">27</td>
            <td class="pg">8</td>
            <td class="pe">10</td>
            <td class="pp">9</td>
            <td class="gf">34</td>
            <td class="gc">38</td>
            <td class="pts seleccionado">34</td>
        </tr>
        <tr>
            <td class="posicion">12</td>
            <td class="equipo">Betis</td>
            <td class="pj">27</td>
            <td class="pg">8</td>
            <td class="pe">9</td>
            <td class="pp">10</td>
            <td class="gf">38</td>
            <td class="gc">43</td>
            <td class="pts seleccionado">33</td>
        </tr>
        <tr>
            <td class="posicion">13</td>
            <td class="equipo">Levante</td>
            <td class="pj">27</td>
            <td class="pg">10</td>
            <td class="pe">3</td>
            <td class="pp">14</td>
            <td class="gf">32</td>
            <td class="gc">40</td>
            <td class="pts seleccionado">33</td>
        </tr>
        <tr>
            <td class="posicion">14</td>
            <td class="equipo">Alav√©s</td>
            <td class="pj">27</td>
            <td class="pg">8</td>
            <td class="pe">8</td>
            <td class="pp">11</td>
            <td class="gf">29</td>
            <td class="gc">37</td>
            <td class="pts seleccionado">32</td>
        </tr>
        <tr>
            <td class="posicion">15</td>
            <td class="equipo">Valladolid</td>
            <td class="pj">26</td>
            <td class="pg">6</td>
            <td class="pe">10</td>
            <td class="pp">10</td>
            <td class="gf">23</td>
            <td class="gc">33</td>
            <td class="pts seleccionado">28</td>
        </tr>
        <tr>
            <td class="posicion">16</td>
            <td class="equipo">Eibar</td>
            <td class="pj">27</td>
            <td class="pg">7</td>
            <td class="pe">6</td>
            <td class="pp">14</td>
            <td class="gf">27</td>
            <td class="gc">41</td>
            <td class="pts seleccionado">27</td>
        </tr>
        <tr>
            <td class="posicion">17</td>
            <td class="equipo">Celta</td>
            <td class="pj">26</td>
            <td class="pg">5</td>
            <td class="pe">10</td>
            <td class="pp">11</td>
            <td class="gf">22</td>
            <td class="gc">34</td>
            <td class="pts seleccionado">25</td>
        </tr>
        <tr>
            <td class="posicion descenso">18</td>
            <td class="equipo">Mallorca</td>
            <td class="pj">27</td>
            <td class="pg">7</td>
            <td class="pe">4</td>
            <td class="pp">16</td>
            <td class="gf">28</td>
            <td class="gc">44</td>
            <td class="pts seleccionado">25</td>
        </tr>
        <tr>
            <td class="posicion descenso">19</td>
            <td class="equipo">Legan√©s</td>
            <td class="pj">27</td>
            <td class="pg">5</td>
            <td class="pe">8</td>
            <td class="pp">14</td>
            <td class="gf">21</td>
            <td class="gc">39</td>
            <td class="pts seleccionado">23</td>
        </tr>
        <tr>
            <td class="posicion descenso">20</td>
            <td class="equipo">Espanyol</td>
            <td class="pj">27</td>
            <td class="pg">4</td>
            <td class="pe">8</td>
            <td class="pp">15</td>
            <td class="gf">23</td>
            <td class="gc">46</td>
            <td class="pts seleccionado">20</td>
        </tr>
        -->
        </tbody>
    </table>
    <script type="text/javascript">var tabla_ordenable='calsificacion_completa';cargarEnlaces();</script>
</div>
<!-- Footer -->
<footer class="page-footer font-small black">

    <!-- Copyright -->
    <div class="footer-copyright text-center py-3">¬© 2020 Copyright:
        <a href="https://score.com/">Score.com</a>
    </div>
    <!-- Copyright -->

</footer>
<!-- Footer -->
</body>
</html>